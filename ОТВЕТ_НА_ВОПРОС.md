# üéØ –û—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å –æ MessageServiceType.GIFT

## ‚ùå –ß–µ—Å—Ç–Ω—ã–π –æ—Ç–≤–µ—Ç: –ù–ï–¢, —è –Ω–µ –±—ã–ª —É–≤–µ—Ä–µ–Ω

–¢—ã –∑–∞–¥–∞–ª –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–æ–ø—Ä–æ—Å! **`MessageServiceType.GIFT` –º–æ–∂–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å** –≤ —Ç–µ–∫—É—â–∏—Ö –≤–µ—Ä—Å–∏—è—Ö pyrofork. 

### üîç –ß—Ç–æ —è –≤—ã—è—Å–Ω–∏–ª:

1. **–§—É–Ω–∫—Ü–∏—è –ø–æ–¥–∞—Ä–∫–æ–≤ –≤ Telegram –Ω–æ–≤–∞—è** (–∫–æ–Ω–µ—Ü 2024 –≥–æ–¥–∞)
2. **pyrofork –º–æ–∂–µ—Ç –Ω–µ —É—Å–ø–µ–≤–∞—Ç—å** –∑–∞ –≤—Å–µ–º–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏ Telegram API
3. **–†–∞–∑–ª–∏—á–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ pyrofork** –∏–º–µ—é—Ç —Ä–∞–∑–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É

## ‚úÖ –ß—Ç–æ —è —Å–¥–µ–ª–∞–ª –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã:

### 1. **–°–æ–∑–¥–∞–ª —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –¥–µ—Ç–µ–∫—Ç–æ—Ä –ø–æ–¥–∞—Ä–∫–æ–≤** (`gift_detector.py`)
- **4 –º–µ—Ç–æ–¥–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è** –≤–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ
- **–†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ MessageServiceType.GIFT**
- **–í—ã—Å–æ–∫–∞—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è**

### 2. **–ú–µ—Ç–æ–¥—ã –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è:**

#### –ú–µ—Ç–æ–¥ 1: Service —Å–æ–æ–±—â–µ–Ω–∏—è
```python
if message.service:
    service_str = str(message.service).lower()
    if 'gift' in service_str:
        is_gift = True
```

#### –ú–µ—Ç–æ–¥ 2: –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—Å—Ç–∞
```python
gift_keywords = ['gift', '–ø–æ–¥–∞—Ä–æ–∫', 'üéÅ', 'present', '–¥–∞—Ä—é']
if any(keyword in text_lower for keyword in gift_keywords):
    is_gift = True
```

#### –ú–µ—Ç–æ–¥ 3: –ú–µ–¥–∏–∞ –∫–æ–Ω—Ç–µ–Ω—Ç
```python
if message.media and 'gift' in str(message.media).lower():
    is_gift = True
```

#### –ú–µ—Ç–æ–¥ 4: Raw –¥–∞–Ω–Ω—ã–µ
```python
if hasattr(message, 'raw') and 'gift' in str(message.raw).lower():
    is_gift = True
```

## üß™ –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å:

–Ø —Å–æ–∑–¥–∞–ª —Ç–µ—Å—Ç (`test_detector_simple.py`) –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∫–∞–∑–∞–ª:

```
‚úÖ Service —Å–æ–æ–±—â–µ–Ω–∏–µ —Å 'gift' - –û–ë–ù–ê–†–£–ñ–ï–ù (—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: 0.90)
‚úÖ –¢–µ–∫—Å—Ç —Å –ø–æ–¥–∞—Ä–∫–æ–º üéÅ - –û–ë–ù–ê–†–£–ñ–ï–ù (—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: 0.80)  
‚úÖ English gift - –û–ë–ù–ê–†–£–ñ–ï–ù (—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: 0.30)
‚ùå –û–±—ã—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ - –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω
‚úÖ –¢–æ–ª—å–∫–æ —ç–º–æ–¥–∑–∏ üéÅ - –û–ë–ù–ê–†–£–ñ–ï–ù (—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: 0.30)
```

## üõ°Ô∏è –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è:

1. **–†–∞–±–æ—Ç–∞–µ—Ç –ë–ï–ó MessageServiceType.GIFT**
2. **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è**
3. **–í—ã—Å–æ–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å** (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞)
4. **–ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
5. **–õ–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è** –Ω–æ–≤—ã–º–∏ –º–µ—Ç–æ–¥–∞–º–∏

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

1. **–ò—Å–ø–æ–ª—å–∑—É–π —Å–æ–∑–¥–∞–Ω–Ω—ã–π –±–æ—Ç** - –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ
2. **–¢–µ—Å—Ç–∏—Ä—É–π —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ø–æ–¥–∞—Ä–∫–∞–º–∏** –≤ Telegram
3. **–û–±–Ω–æ–≤–ª—è–π pyrofork** –¥–æ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –≤–µ—Ä—Å–∏–π
4. **–ú–æ–Ω–∏—Ç–æ—Ä—å –ª–æ–≥–∏** –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

## üìÅ –§–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞:

- `userbot.py` - –æ—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç
- `gift_detector.py` - –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –¥–µ—Ç–µ–∫—Ç–æ—Ä
- `gift_handler.py` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ–¥–∞—Ä–∫–æ–≤
- `config.py` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- `start.py` - –∑–∞–ø—É—Å–∫ —Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏
- `install.sh` - –∞–≤—Ç–æ—É—Å—Ç–∞–Ω–æ–≤–∫–∞
- `README.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:

–ë–æ—Ç **–≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ** –¥–∞–∂–µ –µ—Å–ª–∏ `MessageServiceType.GIFT` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç. –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –Ω–∞–¥–µ–∂–Ω–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø–æ–¥–∞—Ä–∫–æ–≤ —á–µ—Ä–µ–∑ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã.

---

**–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞–∂–Ω—ã–π –≤–æ–ø—Ä–æ—Å!** –≠—Ç–æ –ø–æ–º–æ–≥–ª–æ —Å–æ–∑–¥–∞—Ç—å –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ. üéÅ